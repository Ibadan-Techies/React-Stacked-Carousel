{"version":3,"file":"index.js","sources":["../src/components/StackedCarousel.tsx"],"sourcesContent":["import * as React from \"react\";\nimport \"./stackedCarousel.scss\";\n\nconst { useState, useRef, useEffect } = React;\nexport default function ReactStackedPhotos({\n  children,\n  width,\n  height,\n}: {\n  width?: number;\n  height?: number;\n  children: React.ReactElement;\n}) {\n  const [isHovering, setIsHovering] = useState(false);\n  const imagesRef = useRef<\n    HTMLDivElement & { lastElementChild: HTMLElement | null }\n  >(null);\n  const timerRef1 = useRef<ReturnType<typeof setTimeout> | string>();\n  const timerRef2 = useRef<ReturnType<typeof setTimeout> | string>();\n\n  const [active, setActive] = useState(false);\n  const [last, setLast] = useState<DOMTokenList | null | undefined>(null);\n\n  const handleMouseOver = () => setIsHovering((prev) => !prev);\n\n  useEffect(() => {\n    setLast(\n      imagesRef.current ? imagesRef.current.lastElementChild?.classList : null\n    );\n    return () => {\n      clearTimeout(timerRef1.current as number);\n      clearTimeout(timerRef2.current as number);\n    };\n  }, []);\n\n  // if (arrayChildren.length < 2) {\n  //   throw new Error(\n  //     \"StackedCarousel: the length of your children prop is less than 2\"\n  //   );\n  // }\n\n  const handleOnClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!active) {\n      setActive(true);\n\n      const clickTarget = imagesRef.current;\n      // What side of the element was clicked. Read more\n      // https://stackoverflow.com/questions/15685708/determining-if-mouse-click-happened-in-left-or-right-half-of-div\n      const clickTargetWidth = clickTarget?.offsetWidth,\n        xCoordInClickTarget = event.clientX - Number(clickTarget?.offsetLeft);\n\n      let sideClicked = \"\";\n      if (Number(clickTargetWidth) / 2 > xCoordInClickTarget) {\n        // clicked left\n        sideClicked = \"slide-left\";\n        last?.add(\"slide-left\");\n      } else {\n        // clicked right\n        sideClicked = \"slide-right\";\n        last?.add(\"slide-right\");\n      }\n\n      timerRef1.current = setTimeout(function () {\n        last?.remove(sideClicked);\n        last?.add(\"back\");\n\n        timerRef2.current = setTimeout(function () {\n          imagesRef.current?.insertBefore(\n            imagesRef.current?.lastElementChild as Node,\n            imagesRef.current?.firstElementChild\n          );\n          last?.remove(\"back\");\n          setLast(imagesRef.current?.lastElementChild?.classList);\n          setActive(false);\n          console.log(last);\n        }, 400);\n      }, 500);\n    }\n  };\n  return (\n    <div\n      className=\"_9123_imageWrapper\"\n      ref={imagesRef}\n      onClick={handleOnClick}\n      style={{ width, height }}\n    >\n      {React.Children.map(\n        React.Children.toArray(children),\n        (child: React.ReactElement, index) => {\n          return (\n            <div\n              key={index}\n              className={`img `}\n              style={\n                isHovering\n                  ? { ...child.props.isHovering }\n                  : { ...child.props.default }\n              }\n              onMouseOver={handleMouseOver}\n              onMouseOut={handleMouseOver}\n            >\n              {child.props.children}\n            </div>\n          );\n        }\n      )}\n    </div>\n  );\n}\n"],"names":["React"],"mappings":"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"}